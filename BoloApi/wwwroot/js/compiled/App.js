"use strict"; function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }) } else { obj[key] = value } return obj } class App extends React.Component { constructor(props) { super(props); _defineProperty(this, "setToken", data => { this.setState({ token: data }) }); _defineProperty(this, "setData", data => { this.setState({ data: data }) }); this.state = { token: localStorage.getItem("token"), user: localStorage.getItem("user"), mainview: localStorage.getItem("token") === null ? "login" : "conversation", loginform: { email: "", password: "" }, registerform: { name: "", email: "" } }; this.fetchData = this.fetchData.bind(this); this.loginHandler = this.loginHandler.bind(this) } componentDidMount() { if (localStorage.getItem("token") !== null) { this.fetchData() } } loginHandler() { if (localStorage.getItem("token") != null) { this.fetchData() } } fetchData() { fetch('//' + window.location.host + '/api/Members/Validate', { method: 'get', headers: { 'Authorization': 'Bearer ' + localStorage.getItem("token") } }).then(response => { if (response.status === 401) { localStorage.removeItem("token"); localStorage.clear(); this.setState({ bsstyle: 'danger', message: "Authorization has been denied for this request.", loggedin: false, loading: false, user: null, token: '' }) } else if (response.status === 200) { response.json().then(data => { this.setState({ bsstyle: '', message: "", loggedin: true, loading: false, user: data, mainview: this.state.mainview !== "profile" ? "conversation" : "profile" }) }) } }) } renderHeader() { if (this.state.mainview !== "login" && this.state.mainview !== "register") { const token = localStorage.getItem("token"); let linkitems = []; let loggedin = true; if (token === null) { loggedin = false } let profilepic = null; if (loggedin && this.state.user !== null) { profilepic = React.createElement("img", { src: this.state.user.pic, width: "20", height: "20", className: "rounded-circle" }) } if (loggedin) { linkitems.push(React.createElement("button", { key: "memberlinkli", type: "button", className: "btn btn-dark me-2 membernavlink", onClick: () => { this.setState({ mainview: "profile" }) } }, profilepic, " ", this.state.user !== null ? this.state.user.name : "")); linkitems.push(React.createElement("button", { key: "logoutlinkli", type: "button", className: "btn btn-dark", title: "Sign out", onClick: e => { e.preventDefault(); localStorage.clear(); location.reload() } }, React.createElement("i", { className: "bi bi-power" }))) } else { linkitems.push(React.createElement("button", { key: "loginlinkli", type: "button", className: "btn btn-dark me-2", onClick: () => { this.setState({ mainview: "login" }) } }, "Login")); linkitems.push(React.createElement("button", { key: "registerlinkli", type: "button", className: "btn btn-dark", onClick: () => { this.setState({ mainview: "register" }) } }, "Register")) } return React.createElement("div", { className: "container-fluid bg-dark" }, React.createElement("header", { className: "d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-1 " }, React.createElement("a", { href: "/", className: "d-flex align-items-center col-md-3 mb-2 mb-md-0 text-white text-decoration-none" }, "Waarta"), React.createElement("ul", { className: "nav col-12 col-md-auto mb-2 justify-content-center mb-md-0" }, React.createElement("li", null, React.createElement("a", { className: "nav-link px-2 text-white", onClick: () => { this.setState({ mainview: "conversation" }) }, title: "Chat" }, React.createElement("i", { className: "bi bi-chat-dots" }), " Chat")), React.createElement("li", null, React.createElement("a", { className: "nav-link px-2 text-white", onClick: () => { this.setState({ mainview: "discussion" }) }, title: "Discussion" }, React.createElement("i", { className: "bi bi-people-fill" }), " Discussion"))), React.createElement("div", { className: "col-md-3 text-end" }, linkitems, React.createElement("a", { className: "px-2 text-white", onClick: () => { this.setState({ mainview: "faq" }) }, title: "Frequently Asked Questions" }, React.createElement("i", { className: "bi bi-patch-question" })), React.createElement("a", { className: "px-2 text-white", onClick: () => { this.setState({ mainview: "privacy" }) }, title: "Privacy" }, React.createElement("i", { className: "bi bi-eye-slash-fill" }))))) } else { return null } } renderLogin() { if (this.state.mainview == "login") { return React.createElement("div", { className: "row align-items-center justify-content-center m-3", style: { height: "85vh" } }, React.createElement("div", { className: "col-4" }, React.createElement("h1", { className: "cover-heading", style: { fontSize: "3.5rem" } }, "Waarta"), React.createElement("p", { className: "lead" }, "Easily connect with people. Have meaningful conversations. Free exchange of Ideas. Get things done.", React.createElement("br", null), " Made in India.")), React.createElement("div", { className: "col-4" }, React.createElement(RegisterForm, { onLogin: this.loginHandler, beginWithRegister: false }))) } else { return null } } renderRegister(message, loading) { if (this.state.mainview === "register") { return React.createElement("div", { className: "row justify-content-center m-3" }, React.createElement("div", { className: "col-4" }), React.createElement("div", { className: "col-4" }, React.createElement(RegisterForm, { onLogin: this.loginHandler, beginWithRegister: false }))) } else { return null } } renderProfile() { if (this.state.mainview === "profile") { return React.createElement("div", { className: "container-fluid" }, React.createElement(ManageProfile, { onProfileChange: () => { this.fetchData() } })) } else { return null } } renderConversation() { if (this.state.mainview === "conversation") { return React.createElement(Conversation, null) } else { return null } } renderDiscussion() { if (this.state.mainview === "discussion") { return React.createElement(Meetings, null) } else { return null } } renderPrivacy() { if (this.state.mainview === "privacy") { return React.createElement(Privacy, null) } else { return null } } renderFAQ() { if (this.state.mainview === "faq") { return React.createElement("main", { role: "main", className: "inner cover", style: { padding: "20px" } }, React.createElement("h1", null, "Frequently Asked Questions"), React.createElement("h4", null, "What is Waarta?"), React.createElement("p", null, "Waarta is a hindi word which literally means communication."), React.createElement("h4", null, "Purpose of Waarta"), React.createElement("p", null, "Sole purpose of waarta is to help facilitate communication between people. Waarta achieves this by providing a set of powerful features like people search, conversations and meetings."), React.createElement("h4", null, "People Search?"), React.createElement("p", null, "\"People Search\" as the name suggest is a search feature through which you can search member profiles on waarta. For example if you are looking for a software engineer with ASP.net skill and 10 years of experience in New Delhi. You can can search the same on waarta and find elligible profiles. ", React.createElement("br", null), "You have to visit conversations page to do a people search."), React.createElement("h4", null, "Conversations"), React.createElement("p", null, "\"Conversation\" is a powerful one to one online text, audio and video chat feature, through which you can communicate with your contacts on waarta and with the people you searched on waarta."), React.createElement("h4", null, "Discussions"), React.createElement("p", null, "A place where like minded people can share ideas on topics of their choice. There is no restrictions on number of members a dicussion can have.")) } else { return null } } render() { let loading = this.state.loading ? React.createElement("div", { className: "progress", style: { height: "5px" } }, React.createElement("div", { className: "progress-bar progress-bar-striped progress-bar-animated", role: "progressbar", "aria-valuenow": "75", "aria-valuemin": "0", "aria-valuemax": "100", style: { width: "100%" } })) : null; let messagecontent = this.state.message !== "" ? React.createElement("div", { className: "mt-1 alert alert-" + this.state.bsstyle }, this.state.message) : null; return React.createElement(AuthContext.Provider, { value: { data: this.state.data, token: this.state.token, setToken: this.setToken, setData: this.setData } }, this.renderHeader(), this.renderLogin(), this.renderProfile(), this.renderRegister(messagecontent, loading), this.renderConversation(), this.renderDiscussion(), this.renderFAQ(), this.renderPrivacy()) } }